{"version":3,"file":"index.ejs","sources":["../index.js"],"sourcesContent":["\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var e=require(\"next/headers\"),t=require(\"react\");function n(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var r=n(t);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(){i=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o=\"function\"==typeof Symbol?Symbol:{},u=o.iterator||\"@@iterator\",l=o.asyncIterator||\"@@asyncIterator\",c=o.toStringTag||\"@@toStringTag\";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},\"\")}catch(e){s=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),u=new P(r||[]);return a(i,\"_invoke\",{value:S(e,n,u)}),i}function h(e,t,n){try{return{type:\"normal\",arg:e.call(t,n)}}catch(e){return{type:\"throw\",arg:e}}}t.wrap=f;var d=\"suspendedStart\",p=\"suspendedYield\",g=\"executing\",y=\"completed\",v={};function m(){}function b(){}function w(){}var j={};s(j,u,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(A([])));E&&E!==n&&r.call(E,u)&&(j=E);var L=w.prototype=m.prototype=Object.create(j);function k(e){[\"next\",\"throw\",\"return\"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(a,o,i,u){var l=h(e[a],e,o);if(\"throw\"!==l.type){var c=l.arg,s=c.value;return s&&\"object\"==typeof s&&r.call(s,\"__await\")?t.resolve(s.__await).then((function(e){n(\"next\",e,i,u)}),(function(e){n(\"throw\",e,i,u)})):t.resolve(s).then((function(e){c.value=e,i(c)}),(function(e){return n(\"throw\",e,i,u)}))}u(l.arg)}var o;a(this,\"_invoke\",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function S(t,n,r){var a=d;return function(o,i){if(a===g)throw Error(\"Generator is already running\");if(a===y){if(\"throw\"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var u=r.delegate;if(u){var l=I(u,r);if(l){if(l===v)continue;return l}}if(\"next\"===r.method)r.sent=r._sent=r.arg;else if(\"throw\"===r.method){if(a===d)throw a=y,r.arg;r.dispatchException(r.arg)}else\"return\"===r.method&&r.abrupt(\"return\",r.arg);a=g;var c=h(t,n,r);if(\"normal\"===c.type){if(a=r.done?y:p,c.arg===v)continue;return{value:c.arg,done:r.done}}\"throw\"===c.type&&(a=y,r.method=\"throw\",r.arg=c.arg)}}}function I(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,\"throw\"===r&&t.iterator.return&&(n.method=\"return\",n.arg=e,I(t,n),\"throw\"===n.method)||\"return\"!==r&&(n.method=\"throw\",n.arg=new TypeError(\"The iterator does not provide a '\"+r+\"' method\")),v;var o=h(a,t.iterator,n.arg);if(\"throw\"===o.type)return n.method=\"throw\",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,\"return\"!==n.method&&(n.method=\"next\",n.arg=e),n.delegate=null,v):i:(n.method=\"throw\",n.arg=new TypeError(\"iterator result is not an object\"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type=\"normal\",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:\"root\"}],e.forEach(T,this),this.reset(!0)}function A(t){if(t||\"\"===t){var n=t[u];if(n)return n.call(t);if(\"function\"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+\" is not iterable\")}return b.prototype=w,a(L,\"constructor\",{value:w,configurable:!0}),a(w,\"constructor\",{value:b,configurable:!0}),b.displayName=s(w,c,\"GeneratorFunction\"),t.isGeneratorFunction=function(e){var t=\"function\"==typeof e&&e.constructor;return!!t&&(t===b||\"GeneratorFunction\"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,s(e,c,\"GeneratorFunction\")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},k(O.prototype),s(O.prototype,l,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new O(f(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(L),s(L,c,\"Generator\"),s(L,u,(function(){return this})),s(L,\"toString\",(function(){return\"[object Generator]\"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)\"t\"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(\"throw\"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return u.type=\"throw\",u.arg=t,n.next=r,a&&(n.method=\"next\",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if(\"root\"===i.tryLoc)return a(\"end\");if(i.tryLoc<=this.prev){var l=r.call(i,\"catchLoc\"),c=r.call(i,\"finallyLoc\");if(l&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw Error(\"try statement without catch or finally\");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,\"finallyLoc\")&&this.prev<a.finallyLoc){var o=a;break}}o&&(\"break\"===e||\"continue\"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method=\"next\",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if(\"throw\"===e.type)throw e.arg;return\"break\"===e.type||\"continue\"===e.type?this.next=e.arg:\"return\"===e.type?(this.rval=this.arg=e.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if(\"throw\"===r.type){var a=r.arg;N(n)}return a}}throw Error(\"illegal catch attempt\")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},\"next\"===this.method&&(this.arg=e),v}},t}function u(e){var t=function(e,t){if(\"object\"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||\"default\");if(\"object\"!=typeof r)return r;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return(\"string\"===t?String:Number)(e)}(e,\"string\");return\"symbol\"==typeof t?t:t+\"\"}function l(e){return l=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},l(e)}function c(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){c(o,r,a,i,u,\"next\",e)}function u(e){c(o,r,a,i,u,\"throw\",e)}i(void 0)}))}}function f(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=n){var r,a,o,i,u=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return u}}(e,t)||function(e,t){if(!e)return;if(\"string\"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===n&&e.constructor&&(n=e.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(e);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const y={ab:\"Abkhazian\",aa:\"Afar\",af:\"Afrikaans\",ak:\"Akan\",sq:\"Albanian\",am:\"Amharic\",ar:\"Arabic\",an:\"Aragonese\",hy:\"Armenian\",as:\"Assamese\",av:\"Avaric\",ae:\"Avestan\",ay:\"Aymara\",az:\"Azerbaijani\",bm:\"Bambara\",ba:\"Bashkir\",eu:\"Basque\",be:\"Belarusian\",bn:\"Bengali\",bi:\"Bislama\",bs:\"Bosnian\",br:\"Breton\",bg:\"Bulgarian\",my:\"Burmese\",ca:\"Catalan\",ch:\"Chamorro\",ce:\"Chechen\",ny:\"Chichewa\",zh:\"Chinese\",cu:\"Slavonic\",cv:\"Chuvash\",kw:\"Cornish\",co:\"Corsican\",cr:\"Cree\",hr:\"Croatian\",cs:\"Czech\",da:\"Danish\",dv:\"Divehi\",nl:\"Dutch\",dz:\"Dzongkha\",en:\"English\",eo:\"Esperanto\",et:\"Estonian\",ee:\"Ewe\",fo:\"Faroese\",fj:\"Fijian\",fi:\"Finnish\",fr:\"French\",fy:\"Frisian\",ff:\"Fulah\",gd:\"Gaelic\",gl:\"Galician\",lg:\"Ganda\",ka:\"Georgian\",de:\"German\",el:\"Greek\",kl:\"Kalaallisut\",gn:\"Guarani\",gu:\"Gujarati\",ht:\"Haitian Creole\",ha:\"Hausa\",he:\"Hebrew\",hz:\"Herero\",hi:\"Hindi\",ho:\"Hiri Motu\",hu:\"Hungarian\",is:\"Icelandic\",io:\"Ido\",ig:\"Igbo\",id:\"Indonesian\",ia:\"Interlingua\",ie:\"Interlingue\",iu:\"Inuktitut\",ik:\"Inupiaq\",ga:\"Irish\",it:\"Italian\",ja:\"Japanese\",jv:\"Javanese\",kn:\"Kannada\",kr:\"Kanuri\",ks:\"Kashmiri\",kk:\"Kazakh\",km:\"Khmer\",ki:\"Kikuyu\",rw:\"Kinyarwanda\",ky:\"Kyrgyz\",kv:\"Komi\",kg:\"Kongo\",ko:\"Korean\",kj:\"Kuanyama\",ku:\"Kurdish\",lo:\"Lao\",la:\"Latin\",lv:\"Latvian\",li:\"Limburgan\",ln:\"Lingala\",lt:\"Lithuanian\",lu:\"Luba-Katanga\",lb:\"Luxembourgish\",mk:\"Macedonian\",mg:\"Malagasy\",ms:\"Malay\",ml:\"Malayalam\",mt:\"Maltese\",gv:\"Manx\",mi:\"Maori\",mr:\"Marathi\",mh:\"Marshallese\",mn:\"Mongolian\",na:\"Nauru\",nv:\"Navajo\",nd:\"Northern Ndebele\",nr:\"Southern Ndebele\",ng:\"Ndonga\",ne:\"Nepali\",no:\"Norwegian\",nb:\"Norwegian Bokmål\",nn:\"Norwegian Nynorsk\",ii:\"Nuosu\",oc:\"Occitan\",oj:\"Ojibwa\",or:\"Oriya\",om:\"Oromo\",os:\"Ossetian\",pi:\"Pali\",ps:\"Pashto\",fa:\"Persian\",pl:\"Polish\",pt:\"Portuguese\",pa:\"Punjabi\",qu:\"Quechua\",ro:\"Romanian\",rm:\"Romansh\",rn:\"Rundi\",ru:\"Russian\",se:\"Northern Sami\",sm:\"Samoan\",sg:\"Sango\",sa:\"Sanskrit\",sc:\"Sardinian\",sr:\"Serbian\",sn:\"Shona\",sd:\"Sindhi\",si:\"Sinhalese\",sk:\"Slovak\",sl:\"Slovenian\",so:\"Somali\",st:\"Sotho\",es:\"Spanish\",su:\"Sundanese\",sw:\"Swahili\",ss:\"Swati\",sv:\"Swedish\",tl:\"Tagalog\",ty:\"Tahitian\",tg:\"Tajik\",ta:\"Tamil\",tt:\"Tatar\",te:\"Telugu\",th:\"Thai\",bo:\"Tibetan\",ti:\"Tigrinya\",to:\"Tonga\",ts:\"Tsonga\",tn:\"Tswana\",tr:\"Turkish\",tk:\"Turkmen\",tw:\"Twi\",ug:\"Uyghur\",uk:\"Ukrainian\",ur:\"Urdu\",uz:\"Uzbek\",ve:\"Venda\",vi:\"Vietnamese\",vo:\"Volapük\",wa:\"Walloon\",cy:\"Welsh\",wo:\"Wolof\",xh:\"Xhosa\",yi:\"Yiddish\",yo:\"Yoruba\",za:\"Zhuang\",zu:\"Zulu\"},v=e=>(e=e?.toLowerCase(),2===e?.length?y[e]:3!==e?.length?y[e?.slice(0,2)]||\"\":void 0),m=e=>Array.isArray(e)?e.map(v):v(e),b=e=>\"boolean\"!=typeof e?.translate||e.translate,w=({content:e,untranslated:t=null})=>{if(Array.isArray(e)){let n=\"\";for(const r of e)\"string\"==typeof r?n+=r:b(r)?n+=r?.text||\"\":n+=t?.length>0?t?.shift().text||\"\":r?.text||\"\";return n}return\"string\"==typeof e?e:e?.text||\"\"},j=async({content:e,language:t,config:n})=>{const r=n?.apiKey;if(!r)throw new Error(\"Missing API Key!\");const a=n?.defaultLanguage;if(t===a)return w({content:e});const{processed:o,untranslated:i}=(({content:e})=>{const t=[],n=[];if(Array.isArray(e))for(const r of e)\"string\"==typeof r?t.push({text:r}):b(r)?t.push(r):(t.push({text:\"\",translate:!1}),n.push(r));else\"string\"==typeof e?t.push({text:e}):b(e)?t.push(e):(t.push({text:\"\",translate:!1}),n.push(e));return{processed:t,untranslated:n.length>0?n:null}})({content:e});try{const e=await fetch(`${n?.baseURL}/prompts`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"gtx-api-key\":r},body:JSON.stringify({content:o,targetLanguage:t,defaultLanguage:a})});if(e.ok){const t=await e.json();return w({content:t,untranslated:i})}{const t=await e.text();throw new Error(`${t||e.status}`)}}catch(t){return console.error(t),w({content:e})}};function x(e){var n=e.children,r=e.html,a=e.I18NPromise,o=p(t.useState(null),2),u=o[0],l=o[1];return t.useEffect((function(){var e=function(){var e=s(i().mark((function e(){var t,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a;case 2:o=e.sent,l(null==o||null===(t=o[r])||void 0===t?void 0:t[n]);case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[a]),React.createElement(React.Fragment,null,!u?n:u)}var E=[\"children\",\"projectID\",\"defaultLanguage\",\"forceUserLanguage\",\"i18nTags\",\"excludeTags\",\"remoteSource\",\"gt\"],L=new class{constructor({apiKey:e=\"\",defaultLanguage:t=\"en\",baseURL:n=\"https://translate.gtx.dev\"}={}){this.apiKey=e||(\"undefined\"!=typeof process?process.env.GT_API_KEY:\"\"),this.defaultLanguage=t?.toLowerCase(),this.baseURL=n}async translatePrompt(e,t){return await j({content:e,language:t,config:this})}async translateHTML({projectID:e,defaultLanguage:t,userLanguage:n,content:r}){return await(async({projectID:e,defaultLanguage:t,userLanguage:n,content:r,config:a})=>{const o=a?.apiKey;if(!o)throw new Error(\"Missing API Key!\");if(!e)throw new Error(\"Missing project ID!\");try{const a=await fetch(\"https://html.gtx.dev\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"gtx-api-key\":o},body:JSON.stringify({projectID:e,defaultLanguage:t,userLanguage:n,content:r})});if(a.ok)return await a.json();{const e=await a.text();throw new Error(`${e||a.status}`)}}catch(e){return console.error(e),{}}})({projectID:e,defaultLanguage:t,userLanguage:n,content:r,config:this})}};function k(e){return O.apply(this,arguments)}function O(){return(O=s(i().mark((function e(t){var n,a,u,l,c,s,f,h,g,y,v,b,w,j,k,O,S,I,T,N,P,A,C,D,K,_,F,M,G,U,z;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.children,a=t.projectID,u=void 0===a?\"\":a,l=t.defaultLanguage,c=void 0===l?\"en\":l,s=t.forceUserLanguage,f=void 0===s?\"\":s,h=t.i18nTags,g=void 0===h?[\"p\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"ol\",\"ul\"]:h,y=t.excludeTags,v=void 0===y?[\"ExcludeI18N\"]:y,b=t.remoteSource,w=void 0===b||b,j=t.gt,k=void 0===j?L:j,O=d(t,E),S=f||c,!(!u||m(S)===m(c))){e.next=5;break}return e.abrupt(\"return\",r.default.createElement(r.default.Fragment,null,n));case 5:if(!w){e.next=19;break}return e.prev=6,e.next=9,fetch(\"https://json.gtx.dev/\".concat(u,\"/\").concat(S));case 9:return T=e.sent,e.next=12,T.json();case 12:I=e.sent,e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(6),console.error(e.t0),e.abrupt(\"return\",r.default.createElement(r.default.Fragment,null,n));case 19:return S in O&&(I?O[S]:o(o({},I),O[S])),N=function e(t){return r.default.Children.map(t,(function(t){if(r.default.isValidElement(t)){var n=t.type,a=t.props,o=\"\";return P(n)?\"{variable}\":(Object.entries(a).map((function(t){var n=p(t,2),r=n[0],a=n[1];if(\"children\"===r)return o+=e(a),\"\"})).join(\"\"),\"<\".concat((null==n?void 0:n.displayName)||(null==n?void 0:n.name)||n,\">\").concat(o,\"</\").concat((null==n?void 0:n.displayName)||(null==n?void 0:n.name)||n,\">\"))}return(null==t?void 0:t.toString())||\"\"})).join(\"\")},P=function(e){return!!v.includes(e)||!!v.includes(null==e?void 0:e.name)},A=function(e){return!!g.includes(e)||!!g.includes(null==e?void 0:e.name)},C=function(e){return\"I18N\"===(null==e?void 0:e.name)},D={},K=function e(t,n){var a=I[n];if(\"string\"!=typeof t||null!=a&&a[t]){if(r.default.isValidElement(t)){var o=t.type,i=t.props;P(o)||r.default.Children.forEach(i.children,(function(t){return e(t,n)}))}}else D[n]=D[n]||[],D[n].push(t)},_=function e(t){if(r.default.isValidElement(t)){var n=t.type,a=t.props;if(P(n))return;if(A(n)){var o=N(t);K(t,o)}else r.default.Children.forEach(a.children,(function(t){return e(t)}))}},function e(t){if(r.default.isValidElement(t)){var n=t.type,a=t.props;if(P(n))return;C(n)?r.default.Children.forEach(a.children,(function(e){return _(e)})):r.default.Children.forEach(a.children,(function(t){return e(t)}))}}(n),F=I,Object.keys(D).length>0&&(M=k.translateHTML({projectID:u,userLanguage:S,defaultLanguage:c,content:D})),G=function e(t,n){var a,i;if(\"string\"==typeof t)return null!=F&&null!==(a=F[n])&&void 0!==a&&a[t]?F[n][t]:null!=D&&null!==(i=D[n])&&void 0!==i&&i.includes(t)?r.default.createElement(x,{html:n,I18NPromise:M},t):t;if(r.default.isValidElement(t)){var u=t.type,l=t.props;return P(u)?t:l.children?r.default.cloneElement(t,o(o({},l),{},{children:r.default.Children.toArray(l.children).map((function(t){return e(t,n)}))})):t}return t},U=function e(t){if(r.default.isValidElement(t)){var n=t.type,a=t.props;if(P(n))return t;if(A(n)){var i=N(t);return G(t,i)}return a.children?r.default.cloneElement(t,o(o({},a),{},{children:r.default.Children.toArray(a.children).map((function(t){return e(t)}))})):t}return t},z=function e(t){if(r.default.isValidElement(t)){var n=t.type,a=t.props;return P(n)?t:C(n)?U(t):a.children?r.default.cloneElement(t,o(o({},a),{},{children:r.default.Children.toArray(a.children).map((function(t){return e(t)}))})):t}return t}(n),e.abrupt(\"return\",r.default.createElement(r.default.Fragment,null,z));case 37:case\"end\":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}var S=[\"children\",\"projectID\",\"defaultLanguage\",\"forceUserLanguage\",\"i18nTags\",\"excludeTags\",\"remoteSource\"];function I(){return(I=s(i().mark((function t(n){var r,a,o,u,l,c,s,f,p,g,y,v,m,b,w,j,x,E;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.children,u=n.projectID,l=void 0===u?\"\":u,c=n.defaultLanguage,s=void 0===c?\"en\":c,f=n.forceUserLanguage,p=void 0===f?\"\":f,g=n.i18nTags,y=void 0===g?[\"p\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"ol\",\"ul\"]:g,v=n.excludeTags,m=void 0===v?[\"ExcludeI18N\"]:v,b=n.remoteSource,w=void 0===b||b,j=d(n,S),x=null===(r=e.headers())||void 0===r?void 0:r.get(\"accept-language\"),E=p||(null==x||null===(a=x.split(\",\"))||void 0===a||null===(a=a[0])||void 0===a?void 0:a.slice(0,2))||s,t.abrupt(\"return\",React.createElement(k,h({forceUserLanguage:E,projectID:l,defaultLanguage:s,i18nTags:y,excludeTags:m,remoteSource:w},j),o));case 4:case\"end\":return t.stop()}}),t)})))).apply(this,arguments)}var T=[\"children\",\"projectID\",\"defaultLanguage\",\"forceUserLanguage\",\"i18nTags\",\"excludeTags\",\"remoteSource\"],N=t.createContext();exports.ExcludeI18N=function(e){var t=e.children;return React.createElement(React.Fragment,null,t)},exports.I18N=function(e){var t=e.children;return React.createElement(React.Fragment,null,t)},exports.I18NProvider=function(e){var n=e.children,a=e.projectID,u=void 0===a?\"\":a,c=e.defaultLanguage,f=void 0===c?\"en\":c,h=e.forceUserLanguage,g=void 0===h?\"\":h,y=e.i18nTags,v=void 0===y?[\"p\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"ol\",\"ul\"]:y,b=e.excludeTags,w=void 0===b?[\"ExcludeI18N\"]:b,j=e.remoteSource,x=void 0===j||j,E=d(e,T),L=p(t.useState(g),2),k=L[0],O=L[1],S=p(t.useState(!!u),2),I=S[0],P=S[1];t.useEffect((function(){k?P(u&&m(newUserLanguage)!==m(f)):function(){var e=\"\";e=\"undefined\"!=typeof window?window.navigator.language.split(\"-\")[0]:\"undefined\"!=typeof navigator?navigator.language.split(\"-\")[0]:f,O(e),P(u&&m(e)!==m(f))}()}),[u,f]);var A=p(t.useState(null),2),C=A[0],D=A[1];t.useEffect((function(){var e=function(){var e=s(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},!x){e.next=14;break}return e.prev=2,e.next=5,fetch(\"https://json.gtx.dev/\".concat(u,\"/\").concat(k));case 5:return n=e.sent,e.next=8,n.json();case 8:t=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(\"@generaltranslation/react: No current internationalization found. One will be created dynamically based on your project settings.\");case 14:k in E&&(t=o(o({},t),E[k])),\"object\"===l(t)?D(t):D({});case 16:case\"end\":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();I&&k&&e()}),[u,I,k]);var K=t.useCallback((function(e){return!!w.includes(e)||!!w.includes(null==e?void 0:e.name)}),[]),_=t.useCallback((function(e){return!!v.includes(e)||!!v.includes(null==e?void 0:e.name)}),[]),F=t.useCallback((function(e){return\"I18N\"===(null==e?void 0:e.name)}),[]),M=t.useCallback((function(e){return r.default.Children.map(e,(function(e){if(r.default.isValidElement(e)){var t=e.type,n=e.props,a=\"\";return K(t)?\"{variable}\":(Object.entries(n).map((function(e){var t=p(e,2),n=t[0],r=t[1];if(\"children\"===n)return a+=M(r),\"\"})).join(\"\"),\"<\".concat(t.displayName||(null==t?void 0:t.name)||t,\">\").concat(a,\"</\").concat((null==t?void 0:t.displayName)||(null==t?void 0:t.name)||t,\">\"))}return(null==e?void 0:e.toString())||\"\"})).join(\"\")}),[K]),G=p(t.useState(),2),U=G[0],z=G[1],R=t.useCallback((function(e,t){if(\"string\"==typeof e)return(null==t?void 0:t[e])||e;if(r.default.isValidElement(e)){var n=e.type,a=e.props;return K(n)?e:r.default.cloneElement(e,o(o({},a),{},{children:r.default.Children.toArray(a.children).map((function(e){return R(e,t)}))}))}return e}),[K]),V=t.useCallback((function(e){if(r.default.isValidElement(e)){var t=e.type,n=e.props;if(K(t))return e;if(_(t)){var a=M(e);return R(e,C[a])}return r.default.cloneElement(e,o(o({},n),{},{children:r.default.Children.toArray(n.children).map((function(e){return V(e)}))}))}return e}),[K,_,M,R,C]),B=t.useCallback((function(e){if(r.default.isValidElement(e)){var t=e.type,n=e.props;return K(t)?e:F(t)?V(e):r.default.cloneElement(e,o(o({},n),{},{children:r.default.Children.toArray(n.children).map((function(e){return B(e)}))}))}return e}),[K,F,V]);return t.useEffect((function(){z(B(n))}),[n,C]),r.default.createElement(N.Provider,{value:{projectID:u,defaultLanguage:f,userLanguage:k,translationRequired:I,I18NData:C}},I?U||r.default.createElement(r.default.Fragment,null):n)},exports.NextI18N=function(e){return I.apply(this,arguments)},exports.ServerI18N=k;\n//# sourceMappingURL=index.js.map\n"],"names":["y","ab","aa","af","ak","sq","am","ar","an","hy","as","av","ae","ay","az","bm","ba","eu","be","bn","bi","bs","br","bg","my","ca","ch","ce","ny","zh","cu","cv","kw","co","cr","hr","cs","da","dv","nl","dz","en","eo","et","ee","fo","fj","fi","fr","fy","ff","gd","gl","lg","ka","de","el","kl","gn","gu","ht","ha","he","hz","hi","ho","hu","is","io","ig","id","ia","ie","iu","ik","ga","it","ja","jv","kn","kr","ks","kk","km","ki","rw","ky","kv","kg","ko","kj","ku","lo","la","lv","li","ln","lt","lu","lb","mk","mg","ms","ml","mt","gv","mi","mr","mh","mn","na","nv","nd","nr","ng","ne","no","nb","nn","ii","oc","oj","or","om","os","pi","ps","fa","pl","pt","pa","qu","ro","rm","rn","ru","se","sm","sg","sa","sc","sr","sn","sd","si","sk","sl","so","st","es","su","sw","ss","sv","tl","ty","tg","ta","tt","te","th","bo","ti","to","ts","tn","tr","tk","tw","ug","uk","ur","uz","ve","vi","vo","wa","cy","wo","xh","yi","yo","za","zu"],"mappings":"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"}